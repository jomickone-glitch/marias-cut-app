<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Maria's Cut - Est√©tica Animal</title>

    <!-- PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Maria's Cut">
    <meta name="theme-color" content="#F0EAD6">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Maria's Cut">

    <!-- PWA Icons & Manifest -->
    <link rel="apple-touch-icon" href="778405F5-FB9C-47F4-908A-185070ECD1DC.PNG">
    <link rel="manifest" href="manifest.json">

    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#C5A059',
                        primaryDark: '#A88B45',
                        secondary: '#D4B896',
                        secondaryDark: '#B89C7A',
                        accent: '#FCEEA7',
                        background: '#F9F7F2',
                    },
                    fontFamily: {
                        sans: ['Quicksand', 'Poppins', '-apple-system', 'BlinkMacSystemFont', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* === DESKTOP VIEW (Simulator with iPhone frame) === */
        body {
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #E8E4DE;
            font-family: 'Quicksand', 'Poppins', -apple-system, BlinkMacSystemFont, sans-serif;
            padding: 20px;
        }

        /* ================================================================
           PWA LAYOUT ARCHITECTURE - iOS Native-like Experience
           ================================================================ */

        /* === MOBILE VIEW (Real devices - Fullscreen PWA) === */
        @media screen and (max-width: 768px) {

            /* ========================================
               1. CONQUISTA TOTAL DE BARRA DE ESTADO
               ======================================== */

            /* HTML con fondo beige para que el notch/isla din√°mica sea del mismo color */
            html {
                background-color: #F9F7F2 !important;
                height: 100% !important;
                overflow: hidden !important;
            }

            /* Body sin m√°rgenes, fondo beige, altura completa */
            body {
                background-color: #F9F7F2 !important;
                margin: 0 !important;
                padding: 0 !important;
                height: 100% !important;
                overflow: hidden !important;
            }

            /* ========================================
               2. CONTENEDOR ESTANCO PRINCIPAL
               ======================================== */

            /* Phone frame: contenedor con altura 100dvh y overflow hidden */
            .phone-frame {
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
                right: 0 !important;
                bottom: 0 !important;
                width: 100% !important;
                height: 100dvh !important;
                height: 100% !important;
                border-radius: 0 !important;
                border: none !important;
                box-shadow: none !important;
                background: #F9F7F2 !important;
                overflow: hidden !important;
                /* NO padding-top aqu√≠ - se maneja en cada screen/header */
            }

            .phone-notch {
                display: none !important;
            }

            /* ========================================
               3. SISTEMA DE PANTALLAS (SCREENS)
               ======================================== */

            /* Cada screen ocupa todo el viewport */
            .screen {
                position: absolute !important;
                top: 0 !important;
                left: 0 !important;
                right: 0 !important;
                bottom: 0 !important;
                display: flex !important;
                flex-direction: column !important;
                height: 100% !important;
                overflow: hidden !important;
                background: #F9F7F2 !important;
                border-radius: 0 !important;
            }

            /* ========================================
               4. HEADERS CON SAFE AREA CORRECTA
               ======================================== */

            /* Header gradient (Home) - padding-top incluye safe area */
            .header-gradient {
                flex-shrink: 0 !important;
                padding-top: calc(env(safe-area-inset-top, 20px) + 12px) !important;
                position: relative !important;
                z-index: 10 !important;
            }

            /* Headers de sub-p√°ginas (Mascotas, Reservas, etc.) */
            /* Tienen class pt-12 pero necesitamos agregar safe-area */
            .screen>div[class*="border-b"][class*="pt-12"],
            .screen>div.sticky[class*="pt-12"] {
                flex-shrink: 0 !important;
                /* Reemplazar pt-12 (3rem) con safe-area + espacio razonable */
                padding-top: calc(env(safe-area-inset-top, 20px) + 12px) !important;
                position: relative !important;
                z-index: 10 !important;
                background: #FFFDF5 !important;
            }

            /* ========================================
               5. √ÅREA DE CONTENIDO SCROLLABLE
               ======================================== */

            /* Contenido principal - √∫nica √°rea con scroll */
            .screen>div.px-5 {
                flex: 1 !important;
                overflow-y: auto !important;
                overflow-x: hidden !important;
                -webkit-overflow-scrolling: touch !important;
                overscroll-behavior-y: none !important;
                background: #F9F7F2 !important;
            }

            /* ========================================
               6. TAB BAR FIJA EN BOTTOM
               ======================================== */

            .bottom-nav {
                flex-shrink: 0 !important;
                position: relative !important;
                z-index: 100 !important;
                background: #F9F7F2 !important;
                border-top: 1px solid rgba(197, 160, 89, 0.2) !important;
                /* Safe area inferior para Home Indicator */
                padding-bottom: env(safe-area-inset-bottom, 20px) !important;
            }

            /* ========================================
               7. AJUSTES DE TIPOGRAF√çA MOBILE
               ======================================== */

            .text-xl {
                font-size: 1.15rem !important;
            }

            .text-2xl {
                font-size: 1.35rem !important;
            }

            .text-3xl {
                font-size: 1.65rem !important;
            }

            /* Logo m√°s peque√±o en mobile */
            .header-gradient .w-14 {
                width: 2.75rem !important;
                height: 2.75rem !important;
            }
        }

        /* Very small screens (iPhone SE, etc.) */
        @media screen and (max-width: 375px) {
            .service-card .p-5 {
                padding: 1rem !important;
            }

            .text-xl {
                font-size: 1rem !important;
            }
        }

        /* iPhone Frame - BLACK */
        .phone-frame {
            width: 375px;
            height: 812px;
            background: #F9F7F2;
            border-radius: 50px;
            box-shadow: 0 50px 100px -20px rgba(0, 0, 0, 0.4), 0 30px 60px -30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            position: relative;
            border: 12px solid #1a1a1a;
        }

        /* Notch - BLACK */
        .phone-notch {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 30px;
            background: #1a1a1a;
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
            z-index: 100;
        }

        /* Screen - Crema */
        .screen {
            width: 100%;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            position: absolute;
            top: 0;
            left: 0;
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
            background: #F9F7F2;
        }

        .screen.hidden {
            transform: translateX(100%);
            opacity: 0;
            pointer-events: none;
        }

        .screen.active {
            transform: translateX(0);
            opacity: 1;
        }

        .screen::-webkit-scrollbar {
            width: 0;
        }

        /* Header - Beige to Gold gradient */
        .header-gradient {
            background: linear-gradient(135deg, #F0EAD6 0%, #D4B896 100%);
        }

        /* Service Cards - Cream/Beige with gold border */
        .service-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 24px !important;
            background: #F0EAD6 !important;
            border: 1px solid rgba(197, 160, 89, 0.25) !important;
        }

        .service-card:active {
            transform: scale(0.98);
            box-shadow: 0 4px 15px rgba(75, 54, 33, 0.1);
        }

        /* Buttons - Pill shape */
        .btn-ripple {
            position: relative;
            overflow: hidden;
            border-radius: 50px !important;
        }

        .btn-ripple::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(230, 200, 139, 0.4);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.5s, height 0.5s;
        }

        .btn-ripple:active::after {
            width: 300px;
            height: 300px;
        }

        /* Input fields */
        .input-field {
            transition: all 0.3s ease;
            border-radius: 16px !important;
            background: #FFFDF5 !important;
            border: 2px solid rgba(197, 160, 89, 0.25) !important;
        }

        .input-field:focus {
            border-color: #C5A059 !important;
            box-shadow: 0 0 0 4px rgba(197, 160, 89, 0.15) !important;
        }

        /* Pet Card */
        .pet-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border-radius: 24px !important;
            background: #F0EAD6 !important;
            border: 1px solid rgba(197, 160, 89, 0.2) !important;
        }

        .pet-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 15px 35px rgba(75, 54, 33, 0.1);
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.7;
            }
        }

        .status-pulse {
            animation: pulse 2s infinite;
        }

        /* Bottom Nav - Tab Bar estilo Instagram */
        .bottom-nav {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: #F9F7F2;
            border-top: 1px solid rgba(197, 160, 89, 0.25);
            padding-bottom: 20px;
            z-index: 9999;
            /* Fondo s√≥lido, sin transparencia */
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
        }

        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .spinner {
            animation: spin 1s linear infinite;
        }

        @keyframes checkmark {
            0% {
                transform: scale(0);
            }

            50% {
                transform: scale(1.2);
            }

            100% {
                transform: scale(1);
            }
        }

        .check-animation {
            animation: checkmark 0.5s ease-out;
        }

        /* === PALETA UNIFICADA MARIA'S CUT === */

        /* Textos - Marr√≥n Caf√© */
        .text-gray-800,
        h1,
        h2,
        h3,
        h4 {
            color: #4B3621 !important;
        }

        .text-gray-700 {
            color: #5D4037 !important;
        }

        .text-gray-600 {
            color: #6D5D4E !important;
        }

        .text-gray-500 {
            color: #7D6D5E !important;
        }

        .text-gray-400 {
            color: #8B7355 !important;
        }

        /* Primary - Dorado */
        .text-primary {
            color: #C5A059 !important;
        }

        .bg-primary {
            background-color: #C5A059 !important;
        }

        .border-primary {
            border-color: #C5A059 !important;
        }

        .hover\:bg-primaryDark:hover {
            background-color: #A88B45 !important;
        }

        /* Secondary - Beige c√°lido */
        .text-secondary {
            color: #D4B896 !important;
        }

        .bg-secondary {
            background: #D4B896 !important;
        }

        .border-secondary {
            border-color: #D4B896 !important;
        }

        .hover\:bg-secondaryDark:hover {
            background: #B89C7A !important;
        }

        /* Gradient Cards - Beige to Gold */
        .from-primary {
            --tw-gradient-from: #D4B896 !important;
        }

        .to-primaryDark {
            --tw-gradient-to: #C5A059 !important;
        }

        .from-secondary {
            --tw-gradient-from: #F0EAD6 !important;
        }

        .to-secondaryDark {
            --tw-gradient-to: #D4B896 !important;
        }

        .bg-gradient-to-br.from-primary.to-primaryDark {
            background: linear-gradient(135deg, #F0EAD6 0%, #D4B896 50%, #C5A059 100%) !important;
        }

        .bg-gradient-to-br.from-secondary.to-secondaryDark {
            background: linear-gradient(135deg, #F0EAD6 0%, #E6C88B 50%, #D4B896 100%) !important;
        }

        /* Accent Backgrounds - Warm tones */
        .bg-orange-50 {
            background-color: #FFFDF5 !important;
        }

        .bg-orange-100 {
            background-color: #F9F7F2 !important;
        }

        .border-orange-100 {
            border-color: rgba(197, 160, 89, 0.2) !important;
        }

        .bg-teal-50 {
            background-color: #F5F3EE !important;
        }

        .bg-green-50 {
            background-color: #F5F3EE !important;
        }

        .bg-green-100 {
            background-color: #F0EAD6 !important;
        }

        .bg-green-500 {
            background-color: #8B9A5B !important;
        }

        .bg-amber-50 {
            background-color: #FFFDF5 !important;
        }

        .border-amber-100 {
            border-color: rgba(197, 160, 89, 0.25) !important;
        }

        /* All Buttons - Pill Shape */
        button,
        [role="button"] {
            border-radius: 50px !important;
            font-family: 'Quicksand', sans-serif !important;
            font-weight: 600 !important;
        }

        /* Rounded Corners */
        .rounded-2xl {
            border-radius: 24px !important;
        }

        .rounded-3xl {
            border-radius: 28px !important;
        }

        .rounded-xl {
            border-radius: 20px !important;
        }

        .rounded-lg {
            border-radius: 16px !important;
        }

        .rounded-full {
            border-radius: 50px !important;
        }

        /* White Backgrounds - Cream instead */
        .bg-white {
            background: #FFFDF5 !important;
        }

        /* Shadows - Warm coffee tones */
        .shadow-lg {
            box-shadow: 0 10px 30px rgba(75, 54, 33, 0.08), 0 4px 12px rgba(197, 160, 89, 0.06) !important;
        }

        .shadow-md {
            box-shadow: 0 6px 20px rgba(75, 54, 33, 0.06), 0 3px 8px rgba(197, 160, 89, 0.04) !important;
        }

        /* Progress Bar */
        .bg-gray-200 {
            background: #F0EAD6 !important;
        }

        /* Selected State - Golden Border */
        .border-primary {
            border-color: #C5A059 !important;
            border-width: 2px !important;
        }

        /* Add button - Dashed Golden */
        .border-dashed.border-primary {
            border-color: #C5A059 !important;
        }

        .border-dashed.border-primary:hover {
            background-color: #FCEEA7 !important;
        }

        /* Typography */
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        p,
        span,
        label,
        button {
            font-family: 'Quicksand', 'Poppins', sans-serif !important;
        }

        /* Wave SVG path */
        .header-gradient svg path {
            fill: #F9F7F2 !important;
        }

        /* Text white override for headers */
        .text-white {
            color: #4B3621 !important;
        }

        /* === SOCIAL FEED STYLES === */

        /* Stories Rail - Horizontal Scroll */
        .stories-rail {
            display: flex;
            overflow-x: auto;
            gap: 16px;
            padding: 16px 20px;
            scroll-behavior: smooth;
        }

        .stories-rail::-webkit-scrollbar {
            display: none;
        }

        .story-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex-shrink: 0;
            cursor: pointer;
        }

        .story-avatar-ring {
            width: 68px;
            height: 68px;
            border-radius: 50%;
            padding: 3px;
            /* Gradient dorado/crema */
            background: linear-gradient(45deg, #F0EAD6, #C5A059, #D4B896);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 6px;
            transition: transform 0.2s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .story-item:active .story-avatar-ring {
            transform: scale(0.9);
        }

        .story-avatar {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 3px solid #F9F7F2;
            object-fit: cover;
        }

        /* Feed Post */
        .social-card {
            background: #FFFDF5;
            border-radius: 32px;
            overflow: hidden;
            margin-bottom: 32px;
            box-shadow: 0 10px 40px -10px rgba(75, 54, 33, 0.08);
            border: 1px solid rgba(197, 160, 89, 0.15);
        }

        .post-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 14px 20px;
        }

        .post-media {
            width: 100%;
            /* Aspect ratio 4:5 approx */
            height: 400px;
            object-fit: cover;
            background: #F0EAD6;
        }

        .action-bar {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            gap: 20px;
        }

        .action-icon {
            cursor: pointer;
            transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            color: #4B3621;
        }

        .action-icon:active {
            transform: scale(0.8);
        }

        /* HeartPaw Animation */
        .liked {
            color: #E53935 !important;
            animation: bounce 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes bounce {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.3);
            }

            100% {
                transform: scale(1);
            }
        }

        /* Paw heart shape custom */
        .heart-paw-svg {
            fill: none;
            stroke: currentColor;
            stroke-width: 2;
        }

        .liked .heart-paw-svg {
            fill: currentColor;
            stroke: none;
        }
    </style>
</head>

<body>
    <div class="phone-frame">
        <div class="phone-notch"></div>

        <!-- SCREEN 1: HOME (SOCIAL FEED) -->
        <div id="screen-home" class="screen active">
            <!-- Header Social Club -->
            <div class="header-gradient pt-12 pb-2 px-6 relative z-20 shadow-sm flex justify-between items-center">
                <div>
                    <h1 class="text-xl font-bold text-gray-800 tracking-tight">Maria's Social Club</h1>
                    <p class="text-xs text-primary font-medium tracking-wide uppercase">Comunidad Exclusiva</p>
                </div>
                <div
                    class="w-10 h-10 bg-white/50 rounded-full flex items-center justify-center backdrop-blur-sm shadow-sm border border-white/60">
                    <svg class="w-5 h-5 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
                    </svg>
                </div>
            </div>

            <!-- Scrollable Content -->
            <div class="px-0 pb-32 pt-0 h-full overflow-y-auto" style="scrollbar-width: none;">

                <!-- Stories Rail -->
                <div class="stories-rail border-b border-gray-100 bg-white/50 backdrop-blur-sm">
                    <!-- Injected by JS -->
                    <div id="stories-container" class="flex gap-4"></div>
                </div>

                <!-- Main Feed -->
                <div id="feed-container" class="px-4 pt-6 pb-32">
                    <!-- Injected by JS -->
                </div>
            </div>

            <!-- Bottom Nav Removed (Global Nav Implemented) -->
        </div>

        <!-- SCREEN: APPOINTMENTS (Moved Booking Options Here) -->
        <div id="screen-appointments" class="screen hidden">
            <div
                class="bg-white border-b border-gray-100 pt-12 pb-4 px-5 flex items-center justify-between sticky top-0 z-20">
                <h1 class="text-2xl font-bold text-gray-800">Agendar Cita</h1>
                <div class="w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center">
                    <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                    </svg>
                </div>
            </div>

            <div class="px-5 pb-32 pt-6">
                <!-- Moved Cards from Home -->
                <p class="text-gray-500 font-medium mb-4 text-sm uppercase tracking-wide">Servicios Disponibles</p>

                <!-- Local Service Card -->
                <div onclick="showScreen('screen-booking-local')"
                    class="service-card btn-ripple mb-4 rounded-3xl overflow-hidden shadow-lg cursor-pointer transform hover:scale-[1.02] transition-transform duration-300">
                    <div class="bg-gradient-to-br from-primary to-primaryDark p-5 flex items-center">
                        <div
                            class="w-16 h-16 bg-white rounded-2xl flex items-center justify-center shadow-md mr-4 flex-shrink-0">
                            <svg class="w-8 h-8 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                            </svg>
                        </div>
                        <div class="flex-1">
                            <p class="text-white/70 text-xs uppercase tracking-wider font-medium mb-1">Ven a nuestra
                                sede</p>
                            <h3 class="text-white font-bold text-xl mb-1">Reserva en Local</h3>
                            <p class="text-white/80 text-sm">Instalaciones VIP</p>
                        </div>
                        <svg class="w-6 h-6 text-white/60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                        </svg>
                    </div>
                </div>

                <!-- Van Service Card -->
                <div onclick="showScreen('screen-booking-van')"
                    class="service-card btn-ripple mb-6 rounded-3xl overflow-hidden shadow-lg cursor-pointer transform hover:scale-[1.02] transition-transform duration-300">
                    <div class="bg-gradient-to-br from-secondary to-secondaryDark p-5 flex items-center">
                        <div
                            class="w-16 h-16 bg-white rounded-2xl flex items-center justify-center shadow-md mr-4 flex-shrink-0">
                            <svg class="w-8 h-8 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M9 17a2 2 0 11-4 0 2 2 0 014 0zM19 17a2 2 0 11-4 0 2 2 0 014 0z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0" />
                            </svg>
                        </div>
                        <div class="flex-1">
                            <p class="text-white/70 text-xs uppercase tracking-wider font-medium mb-1">Vamos a tu casa
                            </p>
                            <h3 class="text-white font-bold text-xl mb-1">A Domicilio</h3>
                            <p class="text-white/80 text-sm">Furgoneta equipada</p>
                        </div>
                        <svg class="w-6 h-6 text-white/60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                        </svg>
                    </div>
                </div>

                <h3 class="text-lg font-bold text-gray-800 mb-4">Pr√≥ximas Citas</h3>

                <!-- Empty State Placeholder -->
                <div class="bg-gray-50 border border-gray-100 rounded-3xl p-8 text-center">
                    <div
                        class="w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-sm">
                        <svg class="w-8 h-8 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                    </div>
                    <p class="text-gray-500 text-sm">No tienes citas agendadas a√∫n.</p>
                </div>
            </div>

            <!-- Bottom Nav Removed -->
        </div>

        <!-- SCREEN: BOOKING LOCAL -->

        <div class="bg-white rounded-2xl shadow-md p-4">
            <p class="text-sm font-medium text-gray-700 mb-3">Horarios disponibles</p>
            <div class="grid grid-cols-3 gap-2">
                <button class="py-2 px-3 bg-secondary text-white rounded-lg text-sm font-medium">09:00</button>
                <button class="py-2 px-3 bg-gray-100 text-gray-600 rounded-lg text-sm">09:30</button>
                <button class="py-2 px-3 bg-gray-100 text-gray-600 rounded-lg text-sm">10:00</button>
            </div>
        </div>

        <button onclick="confirmBooking('van')"
            class="btn-ripple w-full bg-secondary hover:bg-secondaryDark text-white font-semibold py-4 rounded-2xl mt-6 transition-colors">
            Confirmar Reserva
        </button>
    </div>
    </div>
    </div>

    <!-- SCREEN 3: SHOP -->
    <!-- SCREEN 3: SHOP -->
    <div id="screen-shop" class="screen hidden h-full overflow-y-auto" style="scrollbar-width: none;">
        <!-- Header -->
        <div
            class="bg-white border-b border-gray-100 pt-12 pb-4 px-5 flex items-center justify-between sticky top-0 z-20">
            <h1 class="text-xl font-bold text-gray-800">Boutique Maria's Cut</h1>
            <div class="relative">
                <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                </svg>
                <span id="cart-badge"
                    class="hidden absolute -top-1 -right-1 bg-red-500 text-white text-[10px] font-bold w-4 h-4 rounded-full flex items-center justify-center">0</span>
            </div>
        </div>

        <!-- Scrollable Content -->
        <div class="px-5 pt-4 pb-32">
            <!-- Search -->
            <div class="relative mb-6">
                <input type="text" placeholder="Buscar productos..."
                    class="w-full bg-gray-50 border border-gray-200 rounded-xl py-3 pl-10 pr-4 text-sm focus:outline-none focus:border-primary transition-colors">
                <svg class="w-5 h-5 text-gray-400 absolute left-3 top-3" fill="none" stroke="currentColor"
                    viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
            </div>

            <!-- Categories -->
            <div class="flex gap-3 overflow-x-auto pb-4 mb-2 no-scrollbar" style="-webkit-overflow-scrolling: touch;">
                <button
                    class="whitespace-nowrap px-4 py-2 bg-primary text-white text-sm font-medium rounded-full shadow-sm">Todo</button>
                <button
                    class="whitespace-nowrap px-4 py-2 bg-white border border-gray-200 text-gray-600 text-sm font-medium rounded-full">Alimentaci√≥n
                    Premium</button>
                <button
                    class="whitespace-nowrap px-4 py-2 bg-white border border-gray-200 text-gray-600 text-sm font-medium rounded-full">Juguetes</button>
                <button
                    class="whitespace-nowrap px-4 py-2 bg-white border border-gray-200 text-gray-600 text-sm font-medium rounded-full">Gadgets</button>
                <button
                    class="whitespace-nowrap px-4 py-2 bg-white border border-gray-200 text-gray-600 text-sm font-medium rounded-full">Higiene</button>
            </div>

            <!-- Product Grid -->
            <div class="grid grid-cols-2 gap-4">
                <!-- Product 1 -->
                <div class="bg-white rounded-2xl p-3 shadow-sm border border-gray-100">
                    <div class="aspect-square bg-gray-100 rounded-xl mb-3 overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1589924691195-41432c84c161?w=400&h=400&fit=crop"
                            class="w-full h-full object-cover">
                    </div>
                    <h3 class="text-sm font-medium text-gray-800 leading-tight mb-1">Perrarina Super Premium</h3>
                    <div class="flex justify-between items-center">
                        <span class="text-primary font-bold">54.99 ‚Ç¨</span>
                        <button onclick="addToCart('Perrarina Super Premium', 54.99)"
                            class="w-7 h-7 bg-gray-100 rounded-full flex items-center justify-center text-gray-600 hover:bg-primary hover:text-white transition-colors">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 4v16m8-8H4" />
                            </svg>
                        </button>
                    </div>
                </div>
                <!-- Product 2 -->
                <div class="bg-white rounded-2xl p-3 shadow-sm border border-gray-100">
                    <div class="aspect-square bg-gray-100 rounded-xl mb-3 overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1576201836106-db1758fd1c97?w=400&h=400&fit=crop"
                            class="w-full h-full object-cover">
                    </div>
                    <h3 class="text-sm font-medium text-gray-800 leading-tight mb-1">Collar GPS</h3>
                    <div class="flex justify-between items-center">
                        <span class="text-primary font-bold">129.99 ‚Ç¨</span>
                        <button onclick="addToCart('Collar GPS', 129.99)"
                            class="w-7 h-7 bg-gray-100 rounded-full flex items-center justify-center text-gray-600 hover:bg-primary hover:text-white transition-colors">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 4v16m8-8H4" />
                            </svg>
                        </button>
                    </div>
                </div>
                <!-- Product 3 -->
                <div class="bg-white rounded-2xl p-3 shadow-sm border border-gray-100">
                    <div class="aspect-square bg-gray-100 rounded-xl mb-3 overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1541599540903-216a46ca1dc0?w=400&h=400&fit=crop"
                            class="w-full h-full object-cover">
                    </div>
                    <h3 class="text-sm font-medium text-gray-800 leading-tight mb-1">Juguete Indestructible</h3>
                    <div class="flex justify-between items-center">
                        <span class="text-primary font-bold">24.50 ‚Ç¨</span>
                        <button onclick="addToCart('Juguete Indestructible', 24.50)"
                            class="w-7 h-7 bg-gray-100 rounded-full flex items-center justify-center text-gray-600 hover:bg-primary hover:text-white transition-colors">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 4v16m8-8H4" />
                            </svg>
                        </button>
                    </div>
                </div>
                <!-- Product 4 -->
                <div class="bg-white rounded-2xl p-3 shadow-sm border border-gray-100">
                    <div class="aspect-square bg-gray-100 rounded-xl mb-3 overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1516734212186-a967f81ad0d7?w=400&h=400&fit=crop"
                            class="w-full h-full object-cover">
                    </div>
                    <h3 class="text-sm font-medium text-gray-800 leading-tight mb-1">Champ√∫ Org√°nico</h3>
                    <div class="flex justify-between items-center">
                        <span class="text-primary font-bold">18.90 ‚Ç¨</span>
                        <button onclick="addToCart('Champ√∫ Org√°nico', 18.90)"
                            class="w-7 h-7 bg-gray-100 rounded-full flex items-center justify-center text-gray-600 hover:bg-primary hover:text-white transition-colors">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 4v16m8-8H4" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SCREEN 4: BOOKING LOCAL -->
    <div id="screen-appointments" class="screen hidden h-full overflow-y-auto" style="scrollbar-width: none;">
        <div class="bg-white border-b border-gray-100 pt-12 pb-4 px-5 flex items-center sticky top-0 z-20">
            <button onclick="showScreen('screen-home')"
                class="p-2 -ml-2 rounded-full hover:bg-gray-100 transition-colors">
                <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
            </button>
            <h1 class="text-lg font-semibold text-gray-800 ml-2">Reserva en Local</h1>
        </div>

        <div class="bg-gray-200 h-1">
            <div class="bg-primary h-full w-1/3 transition-all duration-500"></div>
        </div>

        <div class="px-5 pb-32 pt-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-2">Selecciona un servicio</h2>
            <p class="text-gray-500 mb-6">Elige el servicio que mejor se adapte a tu mascota</p>

            <div class="space-y-4">
                <div class="bg-white rounded-2xl shadow-md p-4 border-2 border-primary cursor-pointer">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold text-gray-800 text-lg">Ba√±o Completo</h3>
                            <p class="text-gray-500 text-sm mt-1">Ba√±o, secado, cepillado y corte de u√±as</p>
                            <div class="flex items-center mt-2 text-gray-400 text-sm">
                                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                                45 minutos
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="text-2xl font-bold text-primary">$25.000</p>
                            <svg class="w-6 h-6 text-primary mt-1 ml-auto" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                    clip-rule="evenodd" />
                            </svg>
                        </div>
                    </div>
                </div>

                <div
                    class="bg-white rounded-2xl shadow-md p-4 border-2 border-transparent hover:border-gray-200 cursor-pointer transition-colors">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold text-gray-800 text-lg">Grooming Premium</h3>
                            <p class="text-gray-500 text-sm mt-1">Ba√±o completo + corte de pelo estilizado</p>
                            <div class="flex items-center mt-2 text-gray-400 text-sm">
                                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                                90 minutos
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="text-2xl font-bold text-primary">$45.000</p>
                        </div>
                    </div>
                </div>
            </div>

            <h3 class="text-lg font-semibold text-gray-800 mt-6 mb-3">¬øCu√°l mascota?</h3>
            <div class="bg-white rounded-2xl shadow-md p-4 border-2 border-primary cursor-pointer">
                <div class="flex items-center">
                    <img src="https://images.unsplash.com/photo-1587300003388-59208cc962cb?w=100&h=100&fit=crop"
                        alt="Luna" class="w-14 h-14 rounded-xl object-cover">
                    <div class="ml-4 flex-1">
                        <h4 class="font-semibold text-gray-800">Luna</h4>
                        <p class="text-gray-500 text-sm">Golden Retriever ‚Ä¢ 28 kg</p>
                    </div>
                    <svg class="w-6 h-6 text-primary" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd"
                            d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                            clip-rule="evenodd" />
                    </svg>
                </div>
            </div>

            <button onclick="confirmBooking('local')"
                class="btn-ripple w-full bg-primary hover:bg-primaryDark text-white font-semibold py-4 rounded-2xl mt-6 transition-colors">
                Confirmar Reserva
            </button>
        </div>
    </div>

    <!-- SCREEN: LOADING (Pantalla de carga intermedia) -->
    <div id="screen-loading" class="screen hidden">
        <div class="flex flex-col items-center justify-center h-full bg-background">
            <div class="w-24 h-24 bg-white rounded-3xl flex items-center justify-center shadow-lg mb-6 overflow-hidden">
                <img src="778405F5-FB9C-47F4-908A-185070ECD1DC.PNG" alt="Maria's Cut Logo"
                    class="w-full h-full object-cover">
            </div>
            <!-- Spinner dorado elegante -->
            <div class="loading-spinner mb-6"></div>
            <p class="text-gray-600 text-base font-medium">Tu mascota, en las mejores manos...</p>
        </div>
    </div>

    <div id="screen-confirmed" class="screen hidden">
        <div class="flex flex-col items-center justify-center h-full bg-background px-6">
            <!-- Success Icon -->
            <div
                class="w-24 h-24 bg-green-50 rounded-full flex items-center justify-center mb-6 check-animation border-4 border-green-100">
                <svg class="w-12 h-12 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                </svg>
            </div>

            <h2 class="text-3xl font-bold text-gray-800 mb-3 text-center tracking-tight">¬°Reserva Confirmada!</h2>
            <p class="text-gray-500 text-center mb-10 text-lg px-4">Tu mascota est√° en las mejores manos.<br>Hemos
                reservado tu espacio.</p>

            <!-- Payment Section -->
            <div class="w-full max-w-sm">
                <div class="mb-4">
                    <p class="text-center text-xs font-bold text-gray-400 uppercase tracking-widest mb-4">Finalizar
                        Reserva</p>
                </div>

                <!-- Button A: Pay Now (Primary) -->
                <button onclick="handleStripePayment()"
                    class="btn-ripple w-full mb-4 relative overflow-hidden group rounded-2xl shadow-xl transform transition-all hover:scale-[1.02] active:scale-[0.98]">
                    <div class="absolute inset-0 bg-gradient-to-r from-[#D4AF37] to-[#C5A059]"></div>
                    <div class="absolute inset-0 bg-white/20 group-hover:bg-white/10 transition-colors"></div>
                    <div class="relative py-4 px-6 flex items-center justify-center gap-3">
                        <span class="text-white font-bold text-lg">üí≥ Pagar Ahora</span>
                        <span class="bg-white/20 text-white text-xs py-0.5 px-2 rounded-full font-medium">Seguro</span>
                    </div>
                </button>

                <!-- Button B: Pay Later (Secondary) -->
                <button onclick="handlePayLater()"
                    class="btn-ripple w-full bg-transparent border-2 border-[#4B3621] text-[#4B3621] font-bold py-4 px-6 rounded-2xl hover:bg-[#4B3621]/5 transition-colors mb-8">
                    Pagar al finalizar el servicio
                </button>

                <!-- Volver Discreto -->
                <button onclick="showScreen('screen-home')"
                    class="w-full text-center text-gray-400 text-sm hover:text-gray-600 transition-colors">
                    Volver al inicio sin pagar
                </button>
            </div>
        </div>
    </div>
    </div>

    </div>

    <div id="global-bottom-nav"
        class="fixed bottom-0 left-0 w-full z-50 bg-[#F9F7F2] border-t border-gray-200 pb-[env(safe-area-inset-bottom)] shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] flex justify-around items-center py-3 px-2">
        <!-- CLUB TAB -->
        <div id="nav-item-club" class="nav-item flex flex-col items-center text-primary cursor-pointer active-tab"
            onclick="showScreen('screen-home')">
            <svg class="w-6 h-6 icon-active hidden" fill="currentColor" viewBox="0 0 20 20">
                <path
                    d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
            </svg>
            <svg class="w-6 h-6 icon-inactive block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
            </svg>
            <span class="text-xs mt-1 font-medium">Club</span>
        </div>

        <!-- SHOP TAB (Replaces Mascotas) -->
        <div id="nav-item-shop" class="nav-item flex flex-col items-center text-gray-400 cursor-pointer"
            onclick="showScreen('screen-shop')">
            <svg class="w-6 h-6 icon-active hidden" fill="currentColor" viewBox="0 0 20 20">
                <path
                    d="M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414c-.18 0-.35-.089-.448-.187l-.093-.093 1.258-5.032 6.72-.03c.532 0 1.006-.32 1.2-1.92l.004-.032a1.002 1.002 0 00-.766-1.12l-1.637-.206L11.558 3h-2.11l-1.282.68L4.654 3.03 4.22 1.297A1 1 0 003.25 1H3zM6 16a2 2 0 11-4 0 2 2 0 014 0zm9 2a2 2 0 100-4 2 2 0 000 4z" />
            </svg>
            <svg class="w-6 h-6 icon-inactive block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
            </svg>
            <span class="text-xs mt-1 font-medium">Tienda</span>
        </div>

        <!-- AGENDAR TAB -->
        <div id="nav-item-agendar" class="nav-item flex flex-col items-center text-gray-400 cursor-pointer"
            onclick="showScreen('screen-appointments')">
            <svg class="w-6 h-6 icon-active hidden" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd"
                    d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z"
                    clip-rule="evenodd" />
            </svg>
            <svg class="w-6 h-6 icon-inactive block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>
            <span class="text-xs mt-1 font-medium">Agendar</span>
        </div>

        <!-- PERFIL TAB -->
        <div id="nav-item-perfil" class="nav-item flex flex-col items-center text-gray-400 cursor-pointer">
            <svg class="w-6 h-6 icon-active hidden" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
            </svg>
            <svg class="w-6 h-6 icon-inactive block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
            </svg>
            <span class="text-xs mt-1 font-medium">Perfil</span>
        </div>
    </div>

    <style>
        /* Spinner dorado elegante */
        .loading-spinner {
            width: 48px;
            height: 48px;
            border: 4px solid #F0EAD6;
            border-top: 4px solid #C5A059;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
    </style>

    <script>
        function showScreen(screenId) {
            // Hide all screens
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.add('hidden');
                screen.classList.remove('active');
            });

            // Show target screen
            if (document.getElementById(screenId)) {
                document.getElementById(screenId).classList.remove('hidden');
                document.getElementById(screenId).classList.add('active');
            }

            // Update Global Navigation State
            updateGlobalNav(screenId);
        }

        function updateGlobalNav(screenId) {
            // Reset all nav items to inactive state (gray text, outline icon)
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('text-primary');
                item.classList.add('text-gray-400');

                // Toggle Icons
                const iconActive = item.querySelector('.icon-active');
                const iconInactive = item.querySelector('.icon-inactive');

                if (iconActive && iconInactive) {
                    iconActive.classList.add('hidden');
                    iconInactive.classList.remove('hidden');
                }
            });

            // Determine active tab ID based on screen ID
            let activeTabId = '';
            if (screenId === 'screen-home') activeTabId = 'nav-item-club';
            else if (screenId === 'screen-shop') activeTabId = 'nav-item-shop';
            else if (screenId === 'screen-appointments' || screenId === 'screen-booking-local' || screenId === 'screen-booking-van') activeTabId = 'nav-item-agendar';
            else if (screenId === 'screen-confirmed') activeTabId = 'nav-item-agendar'; // Keep 'Agendar' active during confirmation

            // Activate target tab
            if (activeTabId) {
                const activeItem = document.getElementById(activeTabId);
                if (activeItem) {
                    activeItem.classList.remove('text-gray-400');
                    activeItem.classList.add('text-primary');

                    // Toggle Icons
                    const iconActive = activeItem.querySelector('.icon-active');
                    const iconInactive = activeItem.querySelector('.icon-inactive');
                    if (iconActive && iconInactive) {
                        iconActive.classList.remove('hidden');
                        iconInactive.classList.add('hidden');
                    }
                }
            }
        }

        function confirmBooking(type) {
            // Mostrar pantalla de carga
            showScreen('screen-loading');

            // Despu√©s de 2 segundos, mostrar confirmaci√≥n
            setTimeout(() => {
                showScreen('screen-confirmed');
            }, 2000);
        }

        function validateLocation() {
            const btn = document.getElementById('btn-validate');
            btn.innerHTML = '<svg class="w-5 h-5 spinner" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg> Validando...';

            setTimeout(() => {
                document.getElementById('validation-result').classList.remove('hidden');
                document.getElementById('validation-success').classList.remove('hidden');
                document.getElementById('address-form').classList.remove('hidden');
                btn.style.display = 'none';
            }, 1500);
        }

        function showSuccessMessage() {
            document.getElementById('address-form').classList.add('hidden');
            document.getElementById('validation-result').classList.add('hidden');
            document.getElementById('success-message').classList.remove('hidden');
        }

        // ========== PAYMENT LOGIC ==========

        function handleStripePayment() {
            // Open Stripe in new tab
            window.open('https://buy.stripe.com/14A8wH1Yjd6E0The7Adby00', '_blank');

            // Optional: Mark as "Payment Started" locally
            updateLastBookingStatus('payment_started');
        }

        function handlePayLater() {
            // Mark as "Payment Pendiente"
            updateLastBookingStatus('payment_pending');

            // Redirect to Appointments (or Home)
            showScreen('screen-appointments');
        }

        function updateLastBookingStatus(status) {
            const bookings = JSON.parse(localStorage.getItem('bookings') || '[]');
            if (bookings.length > 0) {
                // Assuming the last one is the current one
                bookings[bookings.length - 1].paymentStatus = status;
                localStorage.setItem('bookings', JSON.stringify(bookings));
            }
        }
    </script>

    <!-- ========== MODAL DE REGISTRO ========== -->
    <div id="login-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-logo">
                    <img src="778405F5-FB9C-47F4-908A-185070ECD1DC.PNG" alt="Logo"
                        class="w-12 h-12 rounded-xl object-cover">
                </div>
                <h2 class="text-xl font-bold text-gray-800 mt-3">¬°Bienvenido a Maria's Cut!</h2>
                <p class="text-gray-500 text-sm mt-1">Cu√©ntanos un poco sobre ti y tu peludo</p>
            </div>

            <form id="register-form" class="modal-form">
                <div class="form-group">
                    <label class="form-label">Tu nombre completo</label>
                    <input type="text" id="owner-name" class="form-input" placeholder="Ej: Mar√≠a Garc√≠a" required>
                </div>

                <div class="form-group">
                    <label class="form-label">Tel√©fono de contacto</label>
                    <input type="tel" id="owner-phone" class="form-input" placeholder="Ej: +56 9 1234 5678" required>
                </div>

                <div class="form-group">
                    <label class="form-label">Nombre de tu mascota</label>
                    <div id="pets-container">
                        <input type="text" class="form-input pet-input mb-2" placeholder="Ej: Luna" required>
                    </div>
                    <button type="button" onclick="addPetField()" class="add-pet-btn">
                        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                        </svg>
                        A√±adir otra mascota
                    </button>
                </div>

                <button type="submit" class="submit-btn">
                    Guardar y Continuar
                </button>
            </form>

            <button onclick="skipLogin()" class="skip-btn">
                Ahora no, solo estoy mirando
            </button>
        </div>
    </div>

    <style>
        /* Modal Overlay */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(75, 54, 33, 0.4);
            backdrop-filter: blur(4px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
        }

        .modal-overlay.hidden {
            display: none;
        }

        /* Modal Content */
        .modal-content {
            background: #F9F7F2;
            border-radius: 24px;
            border: 2px solid rgba(197, 160, 89, 0.4);
            box-shadow: 0 20px 60px rgba(75, 54, 33, 0.2), 0 8px 24px rgba(197, 160, 89, 0.15);
            padding: 28px 24px;
            width: 100%;
            max-width: 340px;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.95);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            text-align: center;
            margin-bottom: 24px;
        }

        .modal-logo {
            display: inline-flex;
            padding: 8px;
            background: #FFFDF5;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(197, 160, 89, 0.15);
        }

        /* Form Styles */
        .modal-form {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-label {
            font-size: 0.85rem;
            font-weight: 600;
            color: #5D4037;
            margin-bottom: 6px;
        }

        .form-input {
            background: #FFFDF5 !important;
            border: 2px solid rgba(197, 160, 89, 0.25) !important;
            border-radius: 14px !important;
            padding: 12px 16px !important;
            font-size: 0.95rem !important;
            color: #4B3621 !important;
            font-family: 'Quicksand', sans-serif !important;
            transition: all 0.2s ease !important;
            width: 100%;
        }

        .form-input:focus {
            border-color: #C5A059 !important;
            box-shadow: 0 0 0 3px rgba(197, 160, 89, 0.15) !important;
            outline: none !important;
        }

        .form-input::placeholder {
            color: #A69580 !important;
        }

        .add-pet-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: transparent !important;
            border: 2px dashed rgba(197, 160, 89, 0.4) !important;
            border-radius: 12px !important;
            padding: 10px 16px !important;
            font-size: 0.85rem !important;
            color: #C5A059 !important;
            font-weight: 600 !important;
            cursor: pointer;
            transition: all 0.2s ease;
            width: 100%;
            margin-top: 8px;
        }

        .add-pet-btn:hover {
            background: rgba(252, 238, 167, 0.3) !important;
            border-color: #C5A059 !important;
        }

        .submit-btn {
            background: linear-gradient(135deg, #C5A059 0%, #D4B896 100%) !important;
            border: none !important;
            border-radius: 50px !important;
            padding: 14px 24px !important;
            font-size: 1rem !important;
            font-weight: 700 !important;
            color: #FFFDF5 !important;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(197, 160, 89, 0.3);
            margin-top: 8px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(197, 160, 89, 0.4);
        }

        .skip-btn {
            background: transparent !important;
            border: none !important;
            color: #8B7355 !important;
            font-size: 0.85rem !important;
            font-weight: 500 !important;
            cursor: pointer;
            margin-top: 16px;
            padding: 8px !important;
            width: 100%;
            text-align: center;
            transition: color 0.2s ease;
        }

        .skip-btn:hover {
            color: #5D4037 !important;
            text-decoration: underline;
        }

        /* Remove pet button */
        .remove-pet-btn {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(197, 160, 89, 0.2) !important;
            border: none !important;
            border-radius: 50% !important;
            width: 24px !important;
            height: 24px !important;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: #5D4037;
        }

        .pet-input-wrapper {
            position: relative;
            margin-bottom: 8px;
        }

        .pet-input-wrapper .form-input {
            padding-right: 40px !important;
        }
    </style>

    <script>
        // ========== LOGIN/REGISTRO SYSTEM ==========

        // Check if user is logged in
        function isLoggedIn() {
            const userData = localStorage.getItem('mariascut_user');
            return userData !== null;
        }

        // Get user data
        function getUserData() {
            const userData = localStorage.getItem('mariascut_user');
            return userData ? JSON.parse(userData) : null;
        }

        // Show login modal
        function showLoginModal() {
            document.getElementById('login-modal').classList.remove('hidden');
        }

        // Hide login modal
        function hideLoginModal() {
            document.getElementById('login-modal').classList.add('hidden');
        }

        // Skip login (just browsing)
        function skipLogin() {
            hideLoginModal();
        }

        // Add new pet field
        function addPetField() {
            const container = document.getElementById('pets-container');
            const petCount = container.querySelectorAll('.pet-input, .pet-input-wrapper').length;

            if (petCount >= 5) {
                alert('M√°ximo 5 mascotas');
                return;
            }

            const wrapper = document.createElement('div');
            wrapper.className = 'pet-input-wrapper';
            wrapper.innerHTML = `
                <input type="text" class="form-input pet-input" placeholder="Nombre de mascota ${petCount + 1}" required>
                <button type="button" class="remove-pet-btn" onclick="removePetField(this)">
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            `;
            container.appendChild(wrapper);
        }

        // Remove pet field
        function removePetField(btn) {
            btn.parentElement.remove();
        }

        // Handle form submission
        document.getElementById('register-form').addEventListener('submit', function (e) {
            e.preventDefault();

            const ownerName = document.getElementById('owner-name').value.trim();
            const ownerPhone = document.getElementById('owner-phone').value.trim();
            const petInputs = document.querySelectorAll('.pet-input');
            const pets = [];

            petInputs.forEach(input => {
                if (input.value.trim()) {
                    pets.push(input.value.trim());
                }
            });

            if (!ownerName || !ownerPhone || pets.length === 0) {
                alert('Por favor, completa todos los campos');
                return;
            }

            // Save to localStorage
            const userData = {
                ownerName: ownerName,
                ownerPhone: ownerPhone,
                pets: pets,
                registeredAt: new Date().toISOString()
            };

            localStorage.setItem('mariascut_user', JSON.stringify(userData));

            // Hide modal and proceed with booking
            hideLoginModal();
            proceedWithBooking();
        });

        // Proceed with booking after login
        function proceedWithBooking() {
            showScreen('screen-loading');
            setTimeout(() => {
                showScreen('screen-confirmed');
            }, 2000);
        }

        // Modified confirmBooking function - checks login first
        function confirmBooking(type) {
            if (!isLoggedIn()) {
                // Show login modal first
                showLoginModal();
            } else {
                // Already logged in, proceed directly
                proceedWithBooking();
            }
        }


        // ========== SOCIAL FEED LOGIC ==========

        const socialStories = [
            { id: 1, name: "Max", img: "https://images.unsplash.com/photo-1552053831-71594a27632d?w=150&h=150&fit=crop" },
            { id: 2, name: "Bella", img: "https://images.unsplash.com/photo-1536590158209-e9d615d525e4?w=150&h=150&fit=crop" },
            { id: 3, name: "Charlie", img: "https://images.unsplash.com/photo-1548199973-03cce0bbc87b?w=150&h=150&fit=crop" },
            { id: 4, name: "Luna", img: "https://images.unsplash.com/photo-1587300003388-59208cc962cb?w=150&h=150&fit=crop" },
            { id: 5, name: "Rocky", img: "https://images.unsplash.com/photo-1583511655857-d19b40a7a54e?w=150&h=150&fit=crop" },
            { id: 6, name: "Coco", img: "https://images.unsplash.com/photo-1560807707-8cc77767d783?w=150&h=150&fit=crop" }
        ];

        const feedPosts = [
            {
                id: 1,
                user: "Familia Garc√≠a",
                userType: "Cliente VIP",
                userAvatar: "https://randomuser.me/api/portraits/women/44.jpg",
                location: "Furg√≥n VIP",
                img: "https://images.unsplash.com/photo-1583337130417-3346a1be7dee?w=800&fit=crop",
                caption: "¬°Max qued√≥ guap√≠simo! Incre√≠ble el servicio a domicilio, s√∫per c√≥modo. üê∂‚ú®",
                likes: 24
            },
            {
                id: 2,
                user: "Roberto & Loki",
                userType: "Nuevo",
                userAvatar: "https://randomuser.me/api/portraits/men/32.jpg",
                location: "Sede Central",
                img: "https://images.unsplash.com/photo-1517849845537-4d257902454a?w=800&fit=crop",
                caption: "Primer corte de Loki y se port√≥ incre√≠ble. ¬°T√≠a Mar√≠a tiene manos de √°ngel! ‚úÇÔ∏èüíñ",
                likes: 56
            },
            {
                id: 3,
                user: "Sophie",
                userType: "Fan Poodle",
                userAvatar: "https://randomuser.me/api/portraits/women/68.jpg",
                location: "Spa Day",
                img: "https://images.unsplash.com/photo-1596492784531-6e6eb5ea9205?w=800&fit=crop",
                caption: "D√≠a de relax total. El ba√±o de espuma es su favorito. üõÅüßñ‚Äç‚ôÄÔ∏è",
                likes: 89
            },
            {
                id: 4,
                user: "Carlos M.",
                userType: "Due√±o de Rocky",
                userAvatar: "https://randomuser.me/api/portraits/men/22.jpg",
                location: "Furg√≥n #2",
                img: "https://images.unsplash.com/photo-1537151608828-ea2b11777ee8?w=800&fit=crop",
                caption: "¬°Miren esa sonrisa! Rocky listo para el fin de semana. Gracias equipo. üôå",
                likes: 34
            }
        ];

        function renderSocial() {
            // Render Stories
            const storiesContainer = document.getElementById('stories-container');
            // Prepend 'Add Story' fake button
            let storiesHTML = `
                 <div class="story-item" onclick="alert('¬°Pronto podr√°s subir tus historias!')">
                    <div class="story-avatar-ring" style="background: transparent; border: 2px dashed #C5A059;">
                         <div class="w-full h-full bg-white rounded-full flex items-center justify-center">
                            <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                            </svg>
                         </div>
                    </div>
                    <span class="text-xs text-gray-600 font-medium">Tu Historia</span>
                </div>
            `;

            socialStories.forEach(story => {
                storiesHTML += `
                <div class="story-item" onclick="viewStory('${story.name}')">
                    <div class="story-avatar-ring">
                        <img src="${story.img}" class="story-avatar" alt="${story.name}">
                    </div>
                    <span class="text-xs text-gray-800 font-medium">${story.name}</span>
                </div>
                `;
            });
            storiesContainer.innerHTML = storiesHTML;

            // Render Feed
            const feedContainer = document.getElementById('feed-container');
            let feedHTML = '';
            feedPosts.forEach(post => {
                feedHTML += `
                <div class="social-card">
                    <div class="post-header">
                        <div class="flex items-center">
                            <img src="${post.userAvatar}" class="w-10 h-10 rounded-full object-cover mr-3 border border-gray-100">
                            <div>
                                <h4 class="text-sm font-bold text-gray-800">${post.user}</h4>
                                <p class="text-xs text-gray-500">${post.location}</p>
                            </div>
                        </div>
                        <button class="text-gray-400 hover:text-gray-600">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"/>
                            </svg>
                        </button>
                    </div>
                    
                    <img src="${post.img}" class="post-media" loading="lazy" ondblclick="toggleLike(${post.id})">
                    
                    <div class="action-bar">
                        <button class="action-icon" id="like-btn-${post.id}" onclick="toggleLike(${post.id})">
                            <!-- Custom HeartPaw SVG -->
                            <svg class="w-7 h-7 heart-paw-svg" viewBox="0 0 24 24">
                              <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                              <!-- Paw Pads override (simulation via path addition) -->
                               <path d="M12 7.5c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill="currentColor" opacity="0.5" transform="scale(0.5) translate(12, 12)"/>
                            </svg>
                        </button>
                        <button class="action-icon hover:text-gray-600">
                            <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M19 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                            </svg>
                        </button>
                        <button class="action-icon hover:text-gray-600 ml-auto">
                           <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
                            </svg>
                        </button>
                    </div>
                    
                    <div class="px-5 pb-4">
                        <p class="text-xs font-bold text-gray-800 mb-1" id="likes-count-${post.id}">${post.likes} Me gusta</p>
                        <p class="text-sm text-gray-700">
                            <span class="font-bold mr-1">${post.user}</span> ${post.caption}
                        </p>
                        <p class="text-xs text-gray-400 mt-2 uppercase tracking-wide">Hace 2 horas</p>
                    </div>
                </div>
                `;
            });
            feedContainer.innerHTML = feedHTML;
        }

        function toggleLike(id) {
            const btn = document.getElementById(`like-btn-${id}`);
            btn.classList.toggle('liked');

            // Haptic/Visual feedback
            if (window.navigator && window.navigator.vibrate) {
                window.navigator.vibrate(50);
            }
        }

        function viewStory(name) {
            alert(`Viendo la historia de ${name} (Simulaci√≥n de pantalla completa)`);
        }

        // Initialize Social Feed on Load
        document.addEventListener('DOMContentLoaded', () => {
            renderSocial();
        });

    </script>
    <!-- SHOP LOGIC -->
    <script>
        // Cart State
        let cart = [];

        // Add to Cart Function
        function addToCart(productName, price) {
            cart.push({ name: productName, price: price });
            updateCartBadge();
            showToast(`¬°${productName} agregado!`);

            // Add slight bump animation to badge
            const badge = document.getElementById('cart-badge');
            if (badge) {
                badge.classList.add('scale-125');
                setTimeout(() => badge.classList.remove('scale-125'), 200);
            }
        }

        // Update Badge Function
        function updateCartBadge() {
            const badge = document.getElementById('cart-badge');
            if (!badge) return;

            const count = cart.length;

            if (count > 0) {
                badge.textContent = count;
                badge.classList.remove('hidden');
            } else {
                badge.classList.add('hidden');
            }
        }

        // Toast Feedback Function
        function showToast(message) {
            // Check if toast container exists, if not create it
            let toastContainer = document.getElementById('toast-container');
            if (!toastContainer) {
                toastContainer = document.createElement('div');
                toastContainer.id = 'toast-container';
                toastContainer.className = 'fixed bottom-24 left-1/2 transform -translate-x-1/2 z-[60] flex flex-col gap-2 pointer-events-none';
                document.body.appendChild(toastContainer);
            }

            // Create Toast Element
            const toast = document.createElement('div');
            toast.className = 'bg-gray-800 text-white px-4 py-2 rounded-full shadow-lg text-sm font-medium opacity-0 transform translate-y-4 transition-all duration-300 flex items-center gap-2';
            toast.innerHTML = `
                <svg class="w-4 h-4 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                ${message}
            `;

            toastContainer.appendChild(toast);

            // Animate In
            requestAnimationFrame(() => {
                toast.classList.remove('opacity-0', 'translate-y-4');
            });

            // Animate Out & Remove
            setTimeout(() => {
                toast.classList.add('opacity-0', 'translate-y-4');
                setTimeout(() => toast.remove(), 300);
            }, 2000);
        }
    </script>
</body>

</html>